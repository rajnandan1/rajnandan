<!DOCTYPE html><html><head><title>Raj Nandan Sharma</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" href="/assets/images/favicon.ico"><link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,300..900;1,300..900&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined&amp;display=swap" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Work Sans', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XY8P7ZVPV5"></script><script>
							window.dataLayer = window.dataLayer || [];
							function gtag(){dataLayer.push(arguments);}
							gtag('js', new Date());

							gtag('config', 'G-XY8P7ZVPV5');
							function getMillisecondsSinceUTCDate(utcDate) {
								const givenDate = Date.parse(utcDate);
								const now = Date.now();
								const milliseconds = now - givenDate;
								return milliseconds;
							}
						</script><script>
							document.addEventListener("DOMContentLoaded", function () {
								
								const utcDate = '1990-11-14T12:30:14';
								const secondsInYear = 365*86400*1000;
								
								setInterval(() => {
									const age = document.getElementById("age");
									if(age){
										const millisecondsSinceUTCDate = getMillisecondsSinceUTCDate(utcDate);
										age.innerHTML = (millisecondsSinceUTCDate/secondsInYear).toFixed(8);
									}
								}, 400);
								
								const url = new URL(location.href);
								const pathname = url.pathname; 
								const headerLinkClass = document.getElementsByClassName("nav-link");
								for (let i = 0; i < headerLinkClass.length; i++) {
									const link = headerLinkClass[i];
									if (link.getAttribute("href") == pathname) {
										link.classList.add('selected');
									} else {
										link.classList.remove('selected');
									}
									
								}
								for (let i = 0; i < headerLinkClass.length; i++) {
									const link = headerLinkClass[i];
									link.addEventListener("click", function () {
										for (let j = 0; j < headerLinkClass.length; j++) {
											headerLinkClass[j].classList.remove('selected');
										}
										link.classList.add('selected');
									});
								}

								//event listener for div which has data-color-type
								document.addEventListener("click", function (event) {
									const colorBox = event.target.closest('[data-color-type]');
									if (colorBox) {
										const color = colorBox.innerText;
										const colorType = colorBox.getAttribute('data-color-type');
										if (colorType === 'bg') {
											document.body.style.backgroundColor = color;
										} else if (colorType === 'text') {
											document.body.style.color = color;
										} else if (colorType === 'theme') {
											//write css to change a color
											const css = `
												a {
													color: ${color} !important;
												}
											`;
											const style = document.createElement('style');
											style.appendChild(document.createTextNode(css));
											document.head.appendChild(style);

										}
									}
								});
								
							});
						</script><style>
							html {
								font-size:16px;
								line-height:1.6;
							}
							a {
								font-weight: 500;
							}
							* {
								font-family: 'Work Sans', sans-serif;
							}
								/* vietnamese */
							@font-face {
							font-family: 'Newsreader';
							font-style: italic;
							font-weight: 200 800;
							font-display: swap;
							src: url(https://fonts.gstatic.com/s/newsreader/v20/cY9CfjOCX1hbuyalUrK439vCgYhCBJWxZCPp.woff2) format('woff2');
							unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;
							}
							/* latin-ext */
							@font-face {
							font-family: 'Newsreader';
							font-style: italic;
							font-weight: 200 800;
							font-display: swap;
							src: url(https://fonts.gstatic.com/s/newsreader/v20/cY9CfjOCX1hbuyalUrK439vCgIhCBJWxZCPp.woff2) format('woff2');
							unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
							}
							/* latin */
							@font-face {
							font-family: 'Newsreader';
							font-style: italic;
							font-weight: 200 800;
							font-display: swap;
							src: url(https://fonts.gstatic.com/s/newsreader/v20/cY9CfjOCX1hbuyalUrK439vCjohCBJWxZA.woff2) format('woff2');
							unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
							}
							/* vietnamese */
							@font-face {
							font-family: 'Newsreader';
							font-style: normal;
							font-weight: 200 800;
							font-display: swap;
							src: url(https://fonts.gstatic.com/s/newsreader/v20/cY9AfjOCX1hbuyalUrK439HyjIJFJpeBZQ.woff2) format('woff2');
							unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;
							}
							/* latin-ext */
							@font-face {
							font-family: 'Newsreader';
							font-style: normal;
							font-weight: 200 800;
							font-display: swap;
							src: url(https://fonts.gstatic.com/s/newsreader/v20/cY9AfjOCX1hbuyalUrK439DyjIJFJpeBZQ.woff2) format('woff2');
							unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
							}
							/* latin */
							@font-face {
							font-family: 'Newsreader';
							font-style: normal;
							font-weight: 200 800;
							font-display: swap;
							src: url(https://fonts.gstatic.com/s/newsreader/v20/cY9AfjOCX1hbuyalUrK4397yjIJFJpc.woff2) format('woff2');
							unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
							}

							h1, h2, h3 {
								font-family: 'Newsreader', serif;
							}
							a[class^="cs--author"] {
								margin-top: 1rem;
							}
							
						</style><link href="/docs/assets/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/docs/assets/codedoc-bundle.js"></script><meta property="og:image" content="https://www.rajnandan.com/assets/images/og-images/blogs-may-2024-browser-window-mq.png"><meta property="og:description" content="At my work I have to build solutions around communication between browser and iframe or a popup window .ie <iframe> or window.open()"><script>window.githubConfig={"user":"rajnandan1","repo":"rajnandan"}</script><style>.container{padding-top: 0 !important}</style><style>#-codedoc-toc { backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px) }</style><meta name="twitter:title" content="Raj Nandan Sharma"><meta property="og:type" content="article"><meta property="og:title" content="Raj Nandan Sharma"><meta name="keywords" content=""><meta property="blog-tags" content=""></head><body><div class="header-0-0-4"><a href="/" class="nav-link"><img src="/assets/images/me.jpg" style="widht: 24px;height:24px;border-radius:50%;">Raj Nandan Sharma</a></div><div id="-codedoc-container" class="container"><script>window.source = {"base":"docs/md","path":"blogs/may-2024/browser-window-mq.md","namespace":"","title":{"base":"Raj Nandan Sharma","connector":" | "}}</script><div hidden="" data-ignore-text="" data-meta-override-property="og:image"><p><a href="https://www.rajnandan.com/assets/images/og-images/blogs-may-2024-browser-window-mq.png">https://www.rajnandan.com/assets/images/og-images/blogs-may-2024-browser-window-mq.png</a></p></div><div hidden="" data-ignore-text="" data-meta-override-property="og:description"><p>At my work I have to build solutions around communication between browser and iframe or a popup window .ie <code>&lt;iframe&gt;</code> or <code>window.open()</code></p></div><h1 id="messaging-between-browser-windows-using-rutojs" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Messaging between Browser Windows using ruto.js</h1><p>At my work I have to build solutions around communication between browser and iframe or a popup window .ie <code>&lt;iframe&gt;</code> or <code>window.open()</code>. I have to use <code>postMessage</code> js api, and feel it is not very developer friendly. Consider the below situation</p><ol><li>The parent window send a message to the child window</li><li>The child window receives this message, </li><li>The child calls a backend server with the message</li><li>The child sends the response back to parent</li><li>The parent wants to receive this backend response, does some calculation.</li><li>The parent then wants to send a second message to the child.</li><li>And the same thing repeats</li></ol><p>While this may seem trivial when you are doing simple you are doing simple http calls from frontend but across windows something like this is much more complicated. We have also to keep in mind that security is our outmost concern.</p><p>Let us try to code this thing. Parent is parent.com, child is at child.com.</p><p>I am assuming parent has child as an iframe</p><h2 id="1-send-message-from-parent-to-child" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>1. Send Message from parent to child</h2><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="//parent.com" id="code1-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//parent.com</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="iframe.contentWindow.postMessage(message, 'child.com');" id="code1-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">'child.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="" id="code1-l3"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br></code></pre><h2 id="2-receive-message-from-parent-in-child" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>2. Receive message from parent in child</h2><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="//child.com" id="code2-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//child.com</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="window.addEventListener('message', (event) => {" id="code2-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    const expectedOrigin = 'parent.com';" id="code2-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">const</span> expectedOrigin <span class="token operator">=</span> <span class="token string">'parent.com'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    if (event.origin !== expectedOrigin) {" id="code2-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>origin <span class="token operator">!==</span> expectedOrigin<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="        return" id="code2-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">return</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    }" id="code2-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    const message = event.data;" id="code2-l7"><span class="lineCounter-0-0-14 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">const</span> message <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    doPorcessingOfMessage(message)" id="code2-l8"><span class="lineCounter-0-0-14 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">doPorcessingOfMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="})" id="code2-l9"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div><br></code></pre><h2 id="3-child-does-some-processing" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>3. Child does some processing</h2><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="//child.com" id="code3-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//child.com</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="async function doPorcessingOfMessage(message){" id="code3-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">doPorcessingOfMessage</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    const resp = await api(message);" id="code3-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">const</span> resp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">api</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    return resp;" id="code3-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">return</span> resp<span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="}" id="code3-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre><h2 id="4-child-sends-response-back" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>4. Child sends response back</h2><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="//child.com" id="code4-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//child.com</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="window.addEventListener('message', (event) => {" id="code4-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    const expectedOrigin = 'parent.com';" id="code4-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">const</span> expectedOrigin <span class="token operator">=</span> <span class="token string">'parent.com'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    if (event.origin !== expectedOrigin) {" id="code4-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>origin <span class="token operator">!==</span> expectedOrigin<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="        return" id="code4-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">return</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    }" id="code4-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    const message = event.data;" id="code4-l7"><span class="lineCounter-0-0-14 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">const</span> message <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    const resp = await doPorcessingOfMessage(message);" id="code4-l8"><span class="lineCounter-0-0-14 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">const</span> resp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">doPorcessingOfMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    window.parent.postMessage(resp, 'parent.com');" id="code4-l9"><span class="lineCounter-0-0-14 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    window<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>resp<span class="token punctuation">,</span> <span class="token string">'parent.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="})" id="code4-l10"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="" id="code4-l11"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br></code></pre><h2 id="5-parent-receives-the-message" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>5. Parent receives the message</h2><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="//parent.com" id="code5-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//parent.com</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="window.addEventListener('message', (event) => {" id="code5-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    const expectedOrigin = 'child.com';" id="code5-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">const</span> expectedOrigin <span class="token operator">=</span> <span class="token string">'child.com'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    if (event.origin !== expectedOrigin) {" id="code5-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>origin <span class="token operator">!==</span> expectedOrigin<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="        return" id="code5-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">return</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    }" id="code5-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    const message = event.data;" id="code5-l7"><span class="lineCounter-0-0-14 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">const</span> message <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="" id="code5-l8"><span class="lineCounter-0-0-14 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="})" id="code5-l9"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div><br></code></pre><h2 id="6-parent-sends-2nd-message" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>6. Parent sends 2nd message</h2><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="//parent.com" id="code6-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//parent.com</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="window.addEventListener('message', (event) => {" id="code6-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    const expectedOrigin = 'child.com';" id="code6-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">const</span> expectedOrigin <span class="token operator">=</span> <span class="token string">'child.com'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    if (event.origin !== expectedOrigin) {" id="code6-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>origin <span class="token operator">!==</span> expectedOrigin<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="        return" id="code6-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">return</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    }" id="code6-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    const message = event.data;" id="code6-l7"><span class="lineCounter-0-0-14 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">const</span> message <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    const newMessage = getNewMessage(message);" id="code6-l8"><span class="lineCounter-0-0-14 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">const</span> newMessage <span class="token operator">=</span> <span class="token function">getNewMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    iframe.contentWindow.postMessage(message, 'child.com');" id="code6-l9"><span class="lineCounter-0-0-14 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">'child.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="})" id="code6-l10"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div><br></code></pre><p>As we can see the process is completely event based. And writing code to do something like this gets very messy.</p><p>What if there was nicer way to do these. Let us say</p><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="//parent.com" id="code7-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//parent.com</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const resp1 = await sendMessageToChild(message1);" id="code7-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> resp1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sendMessageToChild</span><span class="token punctuation">(</span>message1<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const message2 = await someProcessing(resp1);" id="code7-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> message2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">someProcessing</span><span class="token punctuation">(</span>resp1<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const resp2 = await sendMessageToChild(message2);" id="code7-l4"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> resp2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sendMessageToChild</span><span class="token punctuation">(</span>message2<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br></code></pre><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="//child.com" id="code8-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//child.com</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const message1 = await receiveMessageFromParent();" id="code8-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> message1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">receiveMessageFromParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const resp1 = await someProcessing(message1);" id="code8-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> resp1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">someProcessing</span><span class="token punctuation">(</span>message1<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="await sendMessageToParent(resp1)" id="code8-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">await</span> <span class="token function">sendMessageToParent</span><span class="token punctuation">(</span>resp1<span class="token punctuation">)</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="" id="code8-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br></code></pre><p>In the above scenario, the parent is the orchestrator and child is just responding to actions triggered by parent.</p><p>In a different scenario a child can be the orchestrator and the parent would be just responding to actions triggered by the child.</p><p>That means both the parent and child can send and receiver. If parent is send then child has to be receive, and when parent is receiver the child has to be sender.</p><h2 id="handle-retry" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Handle Retry</h2><p>We have to make sure that there are retries in communication. And also both parent and child should be ready to receive. </p><h2 id="security" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Security</h2><p>We have to have origin checks in both child and domain. Ignore all messages if not received from where we want to receive</p><h2 id="solution" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Solution</h2><p>I think the best way to do this would be to build it like a client/server kind of a thing. Let us take an example of web client and node js express server.</p><div class="tabs-0-0-19"><script id="sIXwUQzayB">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("sIXwUQzayB", "d5H08QOzWT19D1BkAxYQGg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="tab first selected" data-tab-title="Client" data-tab-id="Client"><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="fetch('/message').then(response => response.json())" id="code9-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/message'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="   .then(data => {" id="code9-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="       document.getElementById('response').textContent = JSON.stringify(data, null, 2);" id="code9-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>       document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'response'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="   })" id="code9-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token punctuation">}</span><span class="token punctuation">)</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="   .catch(error => {" id="code9-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="       document.getElementById('response').textContent = 'Error: ' + error;" id="code9-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>       document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'response'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Error: '</span> <span class="token operator">+</span> error<span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="   });" id="code9-l7"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br></code></pre></div><div class="tab" data-tab-title="Server" data-tab-id="Server"><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="app.get('/message', (req, res) => {" id="code10-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    res.send('Hello, world!');" id="code10-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello, world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="});" id="code10-l3"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br></code></pre></div></div><p>I started to write the solution but soon realized it is not easy. So I have to take a more conservative approach</p><h2 id="introducing-ruto" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Introducing Ruto</h2><p>Ruto is a lightweight(4KB), fast and easy-to-use JS library that streamlines the communication between parent and child window(iframe/popup).</p><p>It uses client-server design pattern to communicate between parent and child window. Any window can become the client or the server depending on who wants to send. It abstracts out the complications of postMessage API and provides a simple API to send and receive messages.</p><p>You can visit the github page <a href="https://github.com/rajnandan1/ruto">here</a></p><h2 id="ruto-examples" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Ruto Examples</h2><h3 id="parent-to-iframe" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Parent to iframe</h3><p>Parent will send a message iframe, Parent expects a response from the iframe with 10 secs</p><div class="tabs-0-0-19"><script id="GMHIQJpiue">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("GMHIQJpiue", "d5H08QOzWT19D1BkAxYQGg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="tab first selected" data-tab-title="Parent" data-tab-id="Parent"><pre class="with-bar"><code class="html -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="<iframe id=&quot;iframe&quot; src=&quot;https://example.com/child.html&quot;></iframe>" id="code11-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iframe<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://example.com/child.html<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="<script src=&quot;https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js&quot;></script>" id="code11-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="<script>" id="code11-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const iframe = document.getElementById('iframe');" id="code11-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const message = 'Hello from parent';" id="code11-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">'Hello from parent'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const options = {" id="code11-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    timeout: 10000" id="code11-l7"><span class="lineCounter-0-0-14 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">10000</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="}" id="code11-l8"><span class="lineCounter-0-0-14 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="" id="code11-l9"><span class="lineCounter-0-0-14 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="ruto.send(&quot;https://example.com/parent-to-iframe/topic1&quot;, iframe, message, options).then((response) => {" id="code11-l10"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>ruto<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"https://example.com/parent-to-iframe/topic1"</span><span class="token punctuation">,</span> iframe<span class="token punctuation">,</span> message<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(response); //Hello from child" id="code11-l11"><span class="lineCounter-0-0-14 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Hello from child</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="}).catch((error) => {" id="code11-l12"><span class="lineCounter-0-0-14 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(error);" id="code11-l13"><span class="lineCounter-0-0-14 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="});" id="code11-l14"><span class="lineCounter-0-0-14 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="</script>" id="code11-l15"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br></code></pre></div><div class="tab" data-tab-title="Child" data-tab-id="Child"><pre class="with-bar"><code class="html -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="<script src=&quot;https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js&quot;></script>" id="code12-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="<script>" id="code12-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="ruto.receive(&quot;/parent-to-iframe/topic1&quot;, window.parent, (response, message) => {" id="code12-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>ruto<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span><span class="token string">"/parent-to-iframe/topic1"</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>parent<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">response<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(message); //Hello from parent" id="code12-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Hello from parent</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    return response.send('Hello from child'); //ra" id="code12-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello from child'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ra</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="});" id="code12-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="</script>" id="code12-l7"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br></code></pre></div></div><h3 id="iframe-to-parent" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Iframe to Parent</h3><p>Iframe will send a message to parent, and expects a response from parent within 5 secs</p><div class="tabs-0-0-19"><script id="HQqQhBbnah">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("HQqQhBbnah", "d5H08QOzWT19D1BkAxYQGg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="tab first selected" data-tab-title="Parent" data-tab-id="Parent"><pre class="with-bar"><code class="html -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="<iframe id=&quot;iframe&quot; src=&quot;https://example.com/child.html&quot;></iframe>" id="code13-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iframe<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://example.com/child.html<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="<script src=&quot;https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js&quot;></script>" id="code13-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="<script>" id="code13-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const iframe = document.getElementById('iframe');" id="code13-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="ruto.receive(&quot;/iframe-to-parent/topic1&quot;, iframe, (response, message) => {" id="code13-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>ruto<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span><span class="token string">"/iframe-to-parent/topic1"</span><span class="token punctuation">,</span> iframe<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">response<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(message); //Hello from iframe" id="code13-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Hello from iframe</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    return response.send('Hello from parent');" id="code13-l7"><span class="lineCounter-0-0-14 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello from parent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="});" id="code13-l8"><span class="lineCounter-0-0-14 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="</script>" id="code13-l9"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br></code></pre></div><div class="tab" data-tab-title="Child" data-tab-id="Child"><pre class="with-bar"><code class="html -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="<script src=&quot;https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js&quot;></script>" id="code14-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="<script>" id="code14-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const message = 'Hello from iframe';" id="code14-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">'Hello from iframe'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const options = {" id="code14-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    timeout: 5000" id="code14-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">5000</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="}" id="code14-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="ruto.send(&quot;https://example.com/iframe-to-parent/topic1&quot;, window.parent, message, options).then((response) => {" id="code14-l7"><span class="lineCounter-0-0-14 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>ruto<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"https://example.com/iframe-to-parent/topic1"</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>parent<span class="token punctuation">,</span> message<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(response); //Hello from parent" id="code14-l8"><span class="lineCounter-0-0-14 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Hello from parent</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="}).catch((error) => {" id="code14-l9"><span class="lineCounter-0-0-14 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(error);" id="code14-l10"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="});" id="code14-l11"><span class="lineCounter-0-0-14 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="</script>" id="code14-l12"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br></code></pre></div></div><h3 id="parent-to-popup" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Parent to Popup</h3><p>Parent will send a message to popup, and expects a response from popup within 5 secs</p><div class="tabs-0-0-19"><script id="ailIRJTCCu">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("ailIRJTCCu", "d5H08QOzWT19D1BkAxYQGg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="tab first selected" data-tab-title="Parent" data-tab-id="Parent"><pre class="with-bar"><code class="html -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="<script src=&quot;https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js&quot;></script>" id="code15-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="<script>" id="code15-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const popup = window.open('https://example.com/popup.html', 'popup', 'width=600,height=400');" id="code15-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> popup <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'https://example.com/popup.html'</span><span class="token punctuation">,</span> <span class="token string">'popup'</span><span class="token punctuation">,</span> <span class="token string">'width=600,height=400'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const message = 'Hello from parent';" id="code15-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">'Hello from parent'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const options = {" id="code15-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    timeout: 5000" id="code15-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">5000</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="}" id="code15-l7"><span class="lineCounter-0-0-14 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="ruto.send(&quot;https://example.com/parent-to-popup/topic1&quot;, popup, message, options).then((response) => {" id="code15-l8"><span class="lineCounter-0-0-14 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>ruto<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"https://example.com/parent-to-popup/topic1"</span><span class="token punctuation">,</span> popup<span class="token punctuation">,</span> message<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(response); //Hello from popup" id="code15-l9"><span class="lineCounter-0-0-14 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Hello from popup</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="}).catch((error) => {" id="code15-l10"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(error);" id="code15-l11"><span class="lineCounter-0-0-14 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="});" id="code15-l12"><span class="lineCounter-0-0-14 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="</script>" id="code15-l13"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br></code></pre></div><div class="tab" data-tab-title="Popup" data-tab-id="Popup"><pre class="with-bar"><code class="html -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="<script src=&quot;https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js&quot;></script>" id="code16-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="<script>" id="code16-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="ruto.receive(&quot;/parent-to-popup/topic1&quot;, window.opener, (response, message) => {" id="code16-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>ruto<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span><span class="token string">"/parent-to-popup/topic1"</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>opener<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">response<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(message); //Hello from parent" id="code16-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Hello from parent</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    return response.send('Hello from popup');" id="code16-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello from popup'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="});" id="code16-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="</script>" id="code16-l7"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br></code></pre></div></div><h3 id="popup-to-parent" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Popup to Parent</h3><p>Popup will send a message to parent, and expects a response from parent within 5 secs</p><div class="tabs-0-0-19"><script id="etPSNGkIrF">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("etPSNGkIrF", "d5H08QOzWT19D1BkAxYQGg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="tab first selected" data-tab-title="Parent" data-tab-id="Parent"><pre class="with-bar"><code class="html -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="<script src=&quot;https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js&quot;></script>" id="code17-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="<script>" id="code17-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const popup = window.open('https://example.com/popup.html', 'popup', 'width=600,height=400');" id="code17-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> popup <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'https://example.com/popup.html'</span><span class="token punctuation">,</span> <span class="token string">'popup'</span><span class="token punctuation">,</span> <span class="token string">'width=600,height=400'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="ruto.receive(&quot;/popup-to-parent/topic1&quot;, popup, (response, message) => {" id="code17-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>ruto<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span><span class="token string">"/popup-to-parent/topic1"</span><span class="token punctuation">,</span> popup<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">response<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(message); //Hello from popup" id="code17-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Hello from popup</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    return response.send('Hello from parent');" id="code17-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello from parent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="});" id="code17-l7"><span class="lineCounter-0-0-14 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="</script>" id="code17-l8"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br></code></pre></div><div class="tab" data-tab-title="Popup" data-tab-id="Popup"><pre class="with-bar"><code class="html -codedoc-code-snippet code-0-0-13" tabindex="0"><span class="wmbar-0-0-18"><span></span><span></span><span></span><span></span></span><div class="line-0-0-17  -codedoc-code-line" data-content="<script src=&quot;https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js&quot;></script>" id="code18-l1"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/gh/rajnandan1/ruto/dist/ruto.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="<script>" id="code18-l2"><span class="lineCounter-0-0-14 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span></span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const message = 'Hello from popup';" id="code18-l3"><span class="lineCounter-0-0-14 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">'Hello from popup'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="const options = {" id="code18-l4"><span class="lineCounter-0-0-14 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    timeout: 5000" id="code18-l5"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">5000</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="}" id="code18-l6"><span class="lineCounter-0-0-14 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="ruto.send(&quot;https://example.com/popup-to-parent/topic1&quot;, window.opener, message, options).then((response) => {" id="code18-l7"><span class="lineCounter-0-0-14 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>ruto<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"https://example.com/popup-to-parent/topic1"</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>opener<span class="token punctuation">,</span> message<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(response); //Hello from parent" id="code18-l8"><span class="lineCounter-0-0-14 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Hello from parent</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="}).catch((error) => {" id="code18-l9"><span class="lineCounter-0-0-14 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="    console.log(error);" id="code18-l10"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="});" id="code18-l11"><span class="lineCounter-0-0-14 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-17  -codedoc-code-line" data-content="</script>" id="code18-l12"><span class="lineCounter-0-0-14 prim -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></div><br></code></pre></div></div><script id="AfOEPLsBZc">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("AfOEPLsBZc", "rNAGJitPZOA8sfqc5HliCw==", {"name":"Raj Nandan Sharma","date":"18th May 2024","avatar":"/assets/images/me.jpg","url":"https://www.rajnandan.com"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="contentnav-0-0-11" data-no-search=""><a href="#messaging-between-browser-windows-using-rutojs" class="h1" data-content-highlight="messaging-between-browser-windows-using-rutojs">Messaging between Browser Windows using ruto.js</a><a href="#1-send-message-from-parent-to-child" class="h2" data-content-highlight="1-send-message-from-parent-to-child">1. Send Message from parent to child</a><a href="#2-receive-message-from-parent-in-child" class="h2" data-content-highlight="2-receive-message-from-parent-in-child">2. Receive message from parent in child</a><a href="#3-child-does-some-processing" class="h2" data-content-highlight="3-child-does-some-processing">3. Child does some processing</a><a href="#4-child-sends-response-back" class="h2" data-content-highlight="4-child-sends-response-back">4. Child sends response back</a><a href="#5-parent-receives-the-message" class="h2" data-content-highlight="5-parent-receives-the-message">5. Parent receives the message</a><a href="#6-parent-sends-2nd-message" class="h2" data-content-highlight="6-parent-sends-2nd-message">6. Parent sends 2nd message</a><a href="#handle-retry" class="h2" data-content-highlight="handle-retry">Handle Retry</a><a href="#security" class="h2" data-content-highlight="security">Security</a><a href="#solution" class="h2" data-content-highlight="solution">Solution</a><a href="#introducing-ruto" class="h2" data-content-highlight="introducing-ruto">Introducing Ruto</a><a href="#ruto-examples" class="h2" data-content-highlight="ruto-examples">Ruto Examples</a><a href="#parent-to-iframe" class="h3" data-content-highlight="parent-to-iframe">Parent to iframe</a><a href="#iframe-to-parent" class="h3" data-content-highlight="iframe-to-parent">Iframe to Parent</a><a href="#parent-to-popup" class="h3" data-content-highlight="parent-to-popup">Parent to Popup</a><a href="#popup-to-parent" class="h3" data-content-highlight="popup-to-parent">Popup to Parent</a></div></div><div id="-codedoc-toc" class="toc-0-0-8"><div class="content-0-0-9"><div class="leftHeaderPadding-0-0-7"></div> <p><a href="/">Home</a></p></div></div><div class="footer-0-0-5"><div class="main"><div class="inside"><a href="https://github.com/rajnandan1" target="_blank"><svg fill="{theme.light.background}" width="18" height="18" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="M12,2.2467A10.00042,10.00042,0,0,0,8.83752,21.73419c.5.08752.6875-.21247.6875-.475,0-.23749-.01251-1.025-.01251-1.86249C7,19.85919,6.35,18.78423,6.15,18.22173A3.636,3.636,0,0,0,5.125,16.8092c-.35-.1875-.85-.65-.01251-.66248A2.00117,2.00117,0,0,1,6.65,17.17169a2.13742,2.13742,0,0,0,2.91248.825A2.10376,2.10376,0,0,1,10.2,16.65923c-2.225-.25-4.55-1.11254-4.55-4.9375a3.89187,3.89187,0,0,1,1.025-2.6875,3.59373,3.59373,0,0,1,.1-2.65s.83747-.26251,2.75,1.025a9.42747,9.42747,0,0,1,5,0c1.91248-1.3,2.75-1.025,2.75-1.025a3.59323,3.59323,0,0,1,.1,2.65,3.869,3.869,0,0,1,1.025,2.6875c0,3.83747-2.33752,4.6875-4.5625,4.9375a2.36814,2.36814,0,0,1,.675,1.85c0,1.33752-.01251,2.41248-.01251,2.75,0,.26251.1875.575.6875.475A10.0053,10.0053,0,0,0,12,2.2467Z"></path></svg></a><span style="margin:0 10px"> </span><a href="https://stackoverflow.com/users/3090583/raj-nandan-sharma" target="_blank"><svg fill="{theme.light.background}" width="18" height="18" viewBox="-4 -2 24 24" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin" class="jam jam-stackoverflow"><path d="M13.492 18.136v-5.272h1.665v7.022H.13v-7.022h1.665v5.272z"></path><path d="M3.632 12.364l8.173 1.795.346-1.727-8.173-1.796-.346 1.728zm1.082-4.091l7.567 3.704.692-1.59-7.568-3.728-.691 1.614zm2.097-3.91l6.421 5.614 1.06-1.34L7.87 3.022l-1.06 1.34zM10.962.206L9.622 1.25l4.973 7.045 1.34-1.045L10.962.205zM3.46 16.364h8.346v-1.75H3.46v1.75z"></path></svg></a><span style="margin:0 10px"> </span><a href="https://www.linkedin.com/in/rajnandan1/" target="_blank"><svg fill="{theme.light.background}" width="18" height="18" viewBox="-2 -2 24 24" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin" class="jam jam-linkedin"><path d="M19.959 11.719v7.379h-4.278v-6.885c0-1.73-.619-2.91-2.167-2.91-1.182 0-1.886.796-2.195 1.565-.113.275-.142.658-.142 1.043v7.187h-4.28s.058-11.66 0-12.869h4.28v1.824l-.028.042h.028v-.042c.568-.875 1.583-2.126 3.856-2.126 2.815 0 4.926 1.84 4.926 5.792zM2.421.026C.958.026 0 .986 0 2.249c0 1.235.93 2.224 2.365 2.224h.028c1.493 0 2.42-.989 2.42-2.224C4.787.986 3.887.026 2.422.026zM.254 19.098h4.278V6.229H.254v12.869z"></path></svg></a><span style="margin:0 10px"> </span><a href="https://twitter.com/_rajnandan_" target="_blank"><svg fill="{theme.light.background}" width="18" height="18" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="M22,5.8a8.49,8.49,0,0,1-2.36.64,4.13,4.13,0,0,0,1.81-2.27,8.21,8.21,0,0,1-2.61,1,4.1,4.1,0,0,0-7,3.74A11.64,11.64,0,0,1,3.39,4.62a4.16,4.16,0,0,0-.55,2.07A4.09,4.09,0,0,0,4.66,10.1,4.05,4.05,0,0,1,2.8,9.59v.05a4.1,4.1,0,0,0,3.3,4A3.93,3.93,0,0,1,5,13.81a4.9,4.9,0,0,1-.77-.07,4.11,4.11,0,0,0,3.83,2.84A8.22,8.22,0,0,1,3,18.34a7.93,7.93,0,0,1-1-.06,11.57,11.57,0,0,0,6.29,1.85A11.59,11.59,0,0,0,20,8.45c0-.17,0-.35,0-.53A8.43,8.43,0,0,0,22,5.8Z"></path></svg></a><span style="margin:0 10px"> </span><a href="https://github.com/sponsors/rajnandan1" target="_blank"><svg fill="{theme.light.background}" width="18" height="18" viewBox="0 0 36 36" version="1.1" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>dollar-solid</title><path class="clr-i-solid clr-i-solid-path-1" d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm7.65,21.59c-1,3-3.61,3.84-5.9,4v2a1.25,1.25,0,0,1-2.5,0V27.59A11.47,11.47,0,0,1,11,25a1.25,1.25,0,1,1,1.71-1.83,9.11,9.11,0,0,0,4.55,1.94V18.83a9.63,9.63,0,0,1-3.73-1.41,4.8,4.8,0,0,1-1.91-5.84c.59-1.51,2.42-3.23,5.64-3.51V6.25a1.25,1.25,0,0,1,2.5,0V8.11a9.67,9.67,0,0,1,4.9,2A1.25,1.25,0,0,1,23,11.95a7.14,7.14,0,0,0-3.24-1.31v6.13c.6.13,1.24.27,1.91.48a5.85,5.85,0,0,1,3.69,2.82A4.64,4.64,0,0,1,25.65,23.59Z"></path><path class="clr-i-solid clr-i-solid-path-2" d="M20.92,19.64c-.4-.12-.79-.22-1.17-.3v5.76c2-.2,3.07-.9,3.53-2.3a2.15,2.15,0,0,0-.15-1.58A3.49,3.49,0,0,0,20.92,19.64Z"></path><path class="clr-i-solid clr-i-solid-path-3" d="M13.94,12.48a2.31,2.31,0,0,0,1,2.87,6.53,6.53,0,0,0,2.32.92V10.55C15.16,10.8,14.19,11.84,13.94,12.48Z"></path><rect x="0" y="0" width="36" height="36" fill-opacity="0"></rect></svg></a><span style="margin:0 10px"> </span><span><svg width="18" height="18" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 496 496" style="enable-background:new 0 0 496 496;" xml:space="preserve"><path style="fill:#359846;" d="M0,304v65.6C0,396.8,21.6,416,48,416h400c26.4,0,48-19.2,48-46.4V304H0z"></path><path style="fill:#EA8634;" d="M448,80H48C21.6,80,0,99.2,0,126.4V192h496v-65.6C496,99.2,474.4,80,448,80z"></path><rect y="192" style="fill:#FCFBF0;" width="496" height="112"></rect><path style="fill:#21872F;" d="M446.4,416c26.4,0,49.6-19.2,49.6-46.4V304H315.2L446.4,416z"></path><path style="fill:#E27423;" d="M448,80H48l132.8,112H496v-65.6C496,99.2,474.4,80,448,80z"></path><polygon style="fill:#F7F4E2;" points="316,304 496,304 496,192 180,192 "></polygon><path style="fill:#D86619;" d="M448,80H48l370.4,112H496v-65.6C496,99.2,474.4,80,448,80z"></path><polygon style="fill:#F2E9C2;" points="496,214.4 496,192 414.4,192 "></polygon><path style="fill:#167A20;" d="M496,368.8c0,29.6-21.6,47.2-48,47.2H48c-26.4,0-48-20.8-48-48"></path></svg></span></div></div><div class="right"><script id="nepoe_Qhco">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("nepoe_Qhco", "Vj9baMzYX6511ehyP5EHFQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div> </div><script id="wlwqJAsNsp">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("wlwqJAsNsp", "5JEPPKNgmMhfKEqwO3U0ew==", {"namespace":""});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></body></html>